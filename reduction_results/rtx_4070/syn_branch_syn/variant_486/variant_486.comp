#version 460

// Contents of injectionSwitch: [0.0, 1.0]
layout(set = 0, binding = 1) uniform buf1 {
 vec2 injectionSwitch;
};
#extension GL_KHR_shader_subgroup_basic : enable
#extension GL_KHR_shader_subgroup_ballot : enable
#extension GL_KHR_shader_subgroup_vote : enable
#extension GL_KHR_shader_subgroup_basic : enable
#extension GL_KHR_memory_scope_semantics : enable
layout(set = 0, binding = 0) buffer Buf {
 uint buf[];
};
layout(local_size_x = 128, local_size_y = 1, local_size_z = 1) in;
void main()
{
 uint subgroup_id = gl_SubgroupID;
 uint subgroup_size = gl_SubgroupSize;
 uint subgroup_local_id = gl_SubgroupInvocationID;
 uint num_workgroup = (clamp((clamp((min(gl_NumWorkGroups.x, ((true ? ((min((max((true ? gl_NumWorkGroups.x : (((subgroup_size) ^ 0u))), (true ? gl_NumWorkGroups.x : (subgroup_size)))), (((true ? gl_NumWorkGroups.x : (subgroup_size)) * 1u))))) : (((subgroup_local_id) << 0u)))))), (min((~ ((max(((~ (gl_NumWorkGroups)) / (uvec3(1u, 1u, 1u) ^ uvec3(0u, 0u, 0u))), ~ (gl_NumWorkGroups))))).x, (max(((uvec3(uvec3(max((uvec3(0u, (clamp(((0u + ((0u))) | 0u), 0u, ((((0u) * 1u)) | (0u | 0u)))), (~ (~ (0u)))) | (gl_NumWorkGroups)), gl_NumWorkGroups))))), (uvec3(0u, 0u, 0u) ^ (gl_NumWorkGroups)))).x)), (min(((min((gl_NumWorkGroups.x), (gl_NumWorkGroups.x))) >> uint((injectionSwitch.x))), gl_NumWorkGroups.x)))), (clamp((((~ (((~ (~ ((~ ((min(gl_NumWorkGroups.x, (uvec3(gl_NumWorkGroups[0], (((min(gl_NumWorkGroups, gl_NumWorkGroups))) | (gl_NumWorkGroups))[(((max(1, (int(ivec2(1, 1)))))) + 0)], gl_NumWorkGroups[2])).x)))))))) | ((~ ((min(gl_NumWorkGroups.x, (uvec3(gl_NumWorkGroups[0], (((min(gl_NumWorkGroups, gl_NumWorkGroups))) | (gl_NumWorkGroups))[(((max(1, (int(ivec2(1, 1)))))) + 0)], gl_NumWorkGroups[2])).x)))))))) + 0u), (((~ (~ ((min(gl_NumWorkGroups.x, (uvec3(gl_NumWorkGroups[0], gl_NumWorkGroups[1], gl_NumWorkGroups[2])).x)))))) + 0u), (((~ (~ (((true ? (min(gl_NumWorkGroups.x, (uvec3(gl_NumWorkGroups[0], gl_NumWorkGroups[1], (max((max(gl_NumWorkGroups[2], ((gl_NumWorkGroups[2]) / 1u))), gl_NumWorkGroups[2])))).x)) : (subgroup_id))))))) + 0u))), (min(gl_NumWorkGroups.x, gl_NumWorkGroups.x))));
 uint workgroup_size = gl_WorkGroupSize.x;
 uint workgroup_id = (((uint((injectionSwitch.y)) * ((min((((((((bool(bvec4(((true) || false), true, (bool(bvec4(true, false, false, false))), false))) ? gl_WorkGroupID : ((true ? (uvec3(171030u, 110751u, 2878u)) : (uvec3(171281u, (0u ^ (1727u)), 35072u))))))) - uvec3(0u, 0u, 0u)).x)), (((((((bool(bvec4(((true) || false), true, (bool(bvec4(true, false, false, false))), false))) ? gl_WorkGroupID : ((true ? (uvec3(171030u, 110751u, 2878u)) : (uvec3(171281u, (0u ^ (1727u)), 35072u))))))) - uvec3(0u, 0u, 0u)).x)))) / 1u))) ^ 0u);
 uint workgroup_base = (((uint(uvec3(workgroup_size, (((((1u * (1u)) ^ 0u)) / 1u)), 1u))) | (((((((((uint(uvec3(workgroup_size, 1u, (~ (~ (1u))))))) | ((((uint(uvec3(workgroup_size, 1u, 1u))) << 0u)))) >> 0u)) >> (uint(uint(0u))))) / 1u)))) * workgroup_id;
 uint virtual_gid = (((min((~ (~ (workgroup_base))) + (((uint(uvec4(subgroup_id * subgroup_size, (uint((injectionSwitch.x)) | 0u), (((1u & 1u) << (uint(1u))) >> (uint(1u))), 1u)))) | (subgroup_id * subgroup_size)) + subgroup_local_id, (clamp(((true ? (uint(((uvec2(((max(1u, 1u)) * ((((1u * (workgroup_base + ((((0u >> (uint(7u))) | (1u ^ 1u)) ^ ((subgroup_id * subgroup_size))) | ((clamp(subgroup_id * subgroup_size, (min(subgroup_id * ((subgroup_size) | 0u), subgroup_id * subgroup_size)), subgroup_id * subgroup_size)))) + subgroup_local_id))) + 0u))), 1u)) / uvec2(1u, (((1u << (uint(0u))) >> (uint(0u))) * (1u)))))) : (workgroup_base))), (max(workgroup_base + ((max((min(((uint(uvec3((max(subgroup_id * subgroup_size, subgroup_id * subgroup_size)), (0u | (1u)), 0u)))), ((0u | ((~ (~ (subgroup_id * (clamp(subgroup_size, subgroup_size, subgroup_size)))))))))), (min(((uint(uvec3((max(subgroup_id * subgroup_size, subgroup_id * subgroup_size)), (0u | (1u)), 0u)))), ((0u | ((~ (~ (subgroup_id * (clamp(subgroup_size, subgroup_size, subgroup_size)))))))))))) | (subgroup_id * subgroup_size)) + subgroup_local_id, workgroup_base + ((subgroup_id * subgroup_size) | (0u ^ ((subgroup_id * subgroup_size)))) + subgroup_local_id)), (uint(uvec4(workgroup_base + (((((0u << (uint(7u))) << ((0u + (((uint(1u)) >> 0u))))) | (((subgroup_id)) / uint((injectionSwitch.y)))) * (max((uint(uint(subgroup_size))), (0u | ((uint(uint(subgroup_size)))))))) | (subgroup_id * subgroup_size)) + subgroup_local_id, 1u, 0u, 0u)))))))) | 0u);
 uint next_virtual_gid = workgroup_base + ((false ? (subgroup_local_id) : ((subgroup_id) | (subgroup_id)))) * ((subgroup_size) * (((((1u & 1u) + 0u))) | ((1u & 1u)))) + (((~ ((0u ^ (~ ((max(((max((subgroup_local_id + 1), (((((subgroup_local_id) * 1u) + 1) + 0u)))) | (max((((31888u & ((clamp(0u, 0u, 0u)) << (uint(5u)))) | (((subgroup_local_id) ^ (~ (~ (0u)))))) + 1), ((1u * (subgroup_local_id + 1)))))), (max(max((subgroup_local_id + 1), (subgroup_local_id + 1)), (~ (~ (max(((((((((min(subgroup_local_id + 1, subgroup_local_id + 1))) >> 0u)) / 1u))) | 0u), (subgroup_local_id + ((1) << 0)))))))))))))))) % subgroup_size);
 buf[virtual_gid] = 1;
 if(subgroup_local_id + 1 < ((((max(clamp((max(subgroup_size, ((uint((max(uvec3(((((clamp(((~ (~ (0u))) | ((max(subgroup_size, (((false ? (167058u) : uint(uvec2(subgroup_size, 0u))))))))), (max(subgroup_size, subgroup_size)), (max(subgroup_size, subgroup_size))))) | ((max(subgroup_size, subgroup_size))))), 1u, 1u), uvec3(((max(subgroup_size, subgroup_size))), 1u, 1u))))) << 0u))), (~ (~ ((uint(((false ? (uvec2(71454u, 152964u)) : uvec2(subgroup_size, 0u)))))))), (min(subgroup_size, (clamp(((subgroup_size) * 1u), (clamp(subgroup_size, subgroup_size, subgroup_size)), subgroup_size))))), clamp((max(subgroup_size, ((uint((max(uvec3(((((clamp(((~ (~ (0u))) | ((max(subgroup_size, (((false ? (167058u) : uint(uvec2(subgroup_size, 0u))))))))), (max(subgroup_size, subgroup_size)), (max(subgroup_size, subgroup_size))))) | ((max(subgroup_size, subgroup_size))))), 1u, 1u), uvec3(((max(subgroup_size, subgroup_size))), 1u, 1u))))) << 0u))), (~ (~ ((uint(((false ? (uvec2(71454u, 152964u)) : uvec2(subgroup_size, 0u)))))))), (min(subgroup_size, (clamp(((subgroup_size) * 1u), (clamp(subgroup_size, subgroup_size, subgroup_size)), subgroup_size))))))))) << 0u))
  {
   int i = (((((! (! ((bool(bvec4((false || (injectionSwitch.x < injectionSwitch.y)), false, true, true)))))))) ? 0 : (((max((- 46120), (- 46120)))) - 0)));
   buf[next_virtual_gid] = ((((true ? 0 | (max(2, (((max((((clamp(((2) - (~ (~ ((clamp(0, 0, 0)))))), 2, (clamp(2, 2, ((2) / int((injectionSwitch.y)))))))) + 0), (((clamp(((2) - 0), 2, (((clamp(2, 2, ((2) / int((injectionSwitch.y))))) | (clamp(2, 2, ((2) / int((injectionSwitch.y)))))))))) ^ 0))) << (- 21810 & 0))))) : (94410)))));
  }
 else
  {
   ((((((buf[next_virtual_gid] = 2)) >> 0u)) * 1u) - 0u);
  }
}
