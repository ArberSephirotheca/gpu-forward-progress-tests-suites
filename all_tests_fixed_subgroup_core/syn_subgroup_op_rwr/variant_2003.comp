#version 460

#ifndef REDUCER
#define _GLF_ZERO(X, Y)                   (Y)
#define _GLF_ONE(X, Y)                    (Y)
#define _GLF_FALSE(X, Y)                  (Y)
#define _GLF_TRUE(X, Y)                   (Y)
#define _GLF_IDENTITY(X, Y)               (Y)
#define _GLF_DEAD(X)                      (X)
#define _GLF_FUZZED(X)                    (X)
#define _GLF_WRAPPED_LOOP(X)              X
#define _GLF_WRAPPED_IF_TRUE(X)           X
#define _GLF_WRAPPED_IF_FALSE(X)          X
#define _GLF_SWITCH(X)                    X
#define _GLF_MAKE_IN_BOUNDS_INT(IDX, SZ)  clamp(IDX, 0, SZ - 1)
#define _GLF_MAKE_IN_BOUNDS_UINT(IDX, SZ) clamp(IDX, 0u, SZ - 1u)
#endif


layout(set = 0, binding = 1) uniform buf1 {
 vec2 injectionSwitch;
};
#extension GL_KHR_shader_subgroup_ballot : enable
#extension GL_KHR_shader_subgroup_vote : enable
#extension GL_KHR_shader_subgroup_basic : enable
#extension GL_KHR_memory_scope_semantics : enable
layout(set = 0, binding = 0) buffer Buf {
 uint buf[];
};
layout(local_size_x = 128, local_size_y = 1, local_size_z = 1) in;
void main()
{
 uint subgroup_id = gl_SubgroupID;
uint subgroup_size = 16;
 uint subgroup_local_id = gl_SubgroupInvocationID;
 uint num_workgroup = gl_NumWorkGroups.x;
 uint workgroup_size = gl_WorkGroupSize.x;
 uint workgroup_id = gl_WorkGroupID.x;
 uint workgroup_base = workgroup_size * workgroup_id;
 uint virtual_gid = workgroup_base + subgroup_id * subgroup_size + subgroup_local_id;
 uint next_virtual_gid = workgroup_base + subgroup_id * subgroup_size + ((subgroup_local_id + 1) % subgroup_size);
 uint read_1 = atomicLoad(buf[virtual_gid], 4, 64, 0);
 atomicStore(buf[next_virtual_gid], uint(read_1 + 1), 4, 64, 4);
 uint read_2 = atomicLoad(buf[virtual_gid], 4, 64, 0);
 if(subgroup_local_id + 1 < subgroup_size)
  {
   switch(_GLF_SWITCH(0))
    {
     case 28:
     do
      {
       ((ivec4(87584, 33223, -12699, 45622) % -39965) != ivec4(29599, 86002, 32129, -905));
       {
        usubBorrow(next_virtual_gid, workgroup_size, subgroup_id);
        for(uvec3 _GLF_SWITCH_0_0v, _GLF_SWITCH_0_1v[48], _GLF_SWITCH_0_2v; false; _GLF_SWITCH_0_0v)
         {
          acos(vec3(8.8, -7049.2912, 8.3));
          subgroup_local_id;
          (mat4x3(10.16, -8.0, -736.296, -408.530, 0.0, -9380.1543, -76.96, 94.11, -4176.5200, 91.30, 64.65, 7.8) / (-60.11 + (mat4x3(6.6, 0.9, 56.25, -4164.2539, -197.728, -14.21, -8.8, 736.429, -66.86, 7.4, 76.11, -3.0) * mat4(8.4, 1086.1254, 15.55, 582.361, -1.1, 22.23, -15.65, -6.2, 1.7, -998.488, -61.14, -8.3, -2.1, -992.855, 611.783, -7322.3263))));
          mat2 _GLF_SWITCH_0_3v, _GLF_SWITCH_0_4v;
          mat2 _GLF_SWITCH_0_5v[45], _GLF_SWITCH_0_6v, _GLF_SWITCH_0_7v[84];
         }
        mat3x2(-950.330, -2.6, 671.042, -6.5, -58.25, 9.7);
        mat3x2(65.98, -4.1, -7848.7940, -4047.7759, -7510.2696, -84.48);
       }
       for(uvec3 _GLF_SWITCH_0_8v, _GLF_SWITCH_0_9v; true; ((_GLF_SWITCH_0_9v.rbg << _GLF_SWITCH_0_8v) - uvec3(189965u, 117129u, 132539u)))
        {
        }
       mat4x3(mat3x4(484.570, 643.716, -181.690, 492.035, -5.9, 955.643, 1.8, 146.645, 88.73, -35.49, 7503.7048, -96.08));
       mat3x2(-32.73, 918.429, 4.7, 789.499, 1.5, 8.4);
      }
     while(false);
     case 0:
     case 89:
     case 37:
     case 12:
     atomicStore(buf[next_virtual_gid], uint(read_1 + 1 == read_2) + 1, 4, 64, 4);
     case 95:
     case 82:
     case 39:
     case 97:
     case 88:
     subgroupAll(false);
     break;
     case 70:
     do
      {
       switch(_GLF_SWITCH((0 | 0)))
        {
         case 83:
         while((vec3(-1.2, 521.855, -6.2) != vec3(-791.778, 39.70, 3006.1243)))
          {
           ivec3 _GLF_SWITCH_3_0v, _GLF_SWITCH_3_1v[27];
           ivec4 _GLF_SWITCH_3_2v, _GLF_SWITCH_3_3v, _GLF_SWITCH_3_4v;
           vec2 _GLF_SWITCH_3_5v[44], _GLF_SWITCH_3_6v[55], _GLF_SWITCH_3_7v[14];
           vec2 _GLF_SWITCH_3_8v;
           float _GLF_SWITCH_3_9v, _GLF_SWITCH_3_10v[96];
           uint _GLF_SWITCH_3_11v[20], _GLF_SWITCH_3_12v[49];
          }
         case 0:
         (mat3x2(-8914.9867, 9462.5966, -9.3, 0.0, 6365.1608, 6507.6480) * mat3(-606.445));
         if(false)
          {
           switch(_GLF_SWITCH(0))
            {
             case 39:
             ;
             case 0:
             if(all(bvec3(false, false, false)))
              {
              }
             else
              {
               vec3 _GLF_SWITCH_0_10v[33], _GLF_SWITCH_0_11v, _GLF_SWITCH_0_12v;
               determinant(mat3(mat2(59.50, -46.75, 248.262, -0.5)));
               mat2x3 _GLF_SWITCH_0_13v, _GLF_SWITCH_0_14v[12];
               sign(96241);
               ;
               mix(uvec4(59357u, 133369u, 152974u, 102404u), uvec4(65430u, 135749u, 46170u, 16524u), bvec4(false, false, true, false)).xz;
              }
             case 65:
             mat3x2(-39.88, 70.73, -9740.8032, 756.593, -9372.2754, 70.07);
             for(             ivec3(42830, -46313, 34557);
 (uvec2(177766u, 19638u) != uvec2(46257u, 89160u)); vec3(74.73, 9.2, 3.7))
              {
               (ivec3(67537, -92564, 4886) == ivec3(-52623, 12867, 63994));
               ;
               vec2 _GLF_SWITCH_0_15v[35], _GLF_SWITCH_0_16v[32];
               vec4 _GLF_SWITCH_0_17v;
               min(26620, 45214);
               floatBitsToUint((- -1.7));
               ;
               determinant(mat3(5878.4482, 53.88, 8.9, 90.79, -18.48, -25.76, 316.824, 70.41, 936.383));
              }
             case 91:
             ivec3 _GLF_SWITCH_0_18v, _GLF_SWITCH_0_19v[19];
             ;
             {
              mat4x2(9.4, 3077.6797, -44.30, -378.311, 3211.0656, -8613.6811, 55.70, 9875.8953);
              int _GLF_SWITCH_0_20v[22];
              bvec3(false, true, false);
              mat4(-3518.1976, 469.841, -9.0, 363.603, 1743.0316, -5443.2867, -27.05, 8.7, -41.07, -38.65, 1.7, -689.439, -49.92, 4.1, 113.940, -731.160);
              ;
              (uvec2(3850u, 134788u));
              ;
             }
             {
              switch(_GLF_SWITCH(((0 ^ 0) & (-80905 % 80835))))
               {
                case 83:
                mat3x4 _GLF_SWITCH_4_0v[53];
                case 48:
                _GLF_SWITCH_0_18v;
                case 0:
                case 11:
                mat3(-0.7, -1.3, -2.9, -2.2, -9.8, -67.32, -66.94, 28.81, 53.36);
                case 19:
                case 33:
                case 67:
                vec4 _GLF_SWITCH_0_21v;
                case 5:
                case 20:
                any(bvec2(false, false));
                bvec4(false, false, true, true);
                bool _GLF_SWITCH_0_22v;
                vec4 _GLF_SWITCH_0_23v, _GLF_SWITCH_0_24v, _GLF_SWITCH_0_25v;
                break;
                case 36:
                (_GLF_SWITCH_0_25v * _GLF_SWITCH_0_24v);
                default:
                1;
               }
             }
             case 43:
             {
              bvec3(true, true, true);
              float _GLF_SWITCH_0_26v, _GLF_SWITCH_0_27v[21], _GLF_SWITCH_0_28v;
             }
             break;
             default:
             1;
            }
          }
         {
          bvec4(true, false, true, true);
          while((mat3(-7.0, -3214.6816, 9788.0441, 1.6, 9.2, -2.9, 6528.7253, -1518.4167, -50.30) != mat3(-694.945, 104.419, -128.254, 4.9, -8.8, -8.3, -58.50, -1.3, 3783.5815)))
           {
            mat2x4 _GLF_SWITCH_0_29v, _GLF_SWITCH_0_30v, _GLF_SWITCH_0_31v;
            acos(-439.088);
            _GLF_SWITCH_0_30v;
           }
          uvec3(34366u, 7252u, 57582u);
         }
         for(mat3x2 _GLF_SWITCH_0_32v; ((vec4(-4.7, -40.28, 20.34, -286.012)) == vec4(9.0, -5801.6950, 6142.1762, -517.070)); mat4((33.31 - -898.520), -15.00, 83.21, -958.324, -7.4, pow(34.77, 9.8), 3.6, -9.6, 19.37, cos(-718.982), -3.3, sin(4.3), -1513.9065, tan(7.0), 10.26, dot(-7.9, 8.1)))
          {
           switch(_GLF_SWITCH(0))
            {
             case 36:
             mat4 _GLF_SWITCH_2_0v[84], _GLF_SWITCH_2_1v, _GLF_SWITCH_2_2v;
             case 43:
             bvec4(true, bvec3(true, false, true));
             case 0:
             mat3 _GLF_SWITCH_0_33v;
             case 7:
             case 30:
             while(((+ -6573) > 88313))
              {
               switch(_GLF_SWITCH(0))
                {
                 case 80:
                 -1540.8579;
                 case 0:
                 case 33:
                 (ivec2(-73117, 96745) * 76398);
                 mat2(-5246.1989, -6.9, 3391.9232, 1.3);
                 bvec4 _GLF_SWITCH_0_34v[9], _GLF_SWITCH_0_35v[27];
                 83612;
                 uvec4 _GLF_SWITCH_0_36v[99], _GLF_SWITCH_0_37v;
                 bvec2 _GLF_SWITCH_0_38v[26], _GLF_SWITCH_0_39v[77], _GLF_SWITCH_0_40v;
                 (ivec4(-74374, 24259, -36971, -10851) & ivec4(9994, 87247, -66579, -37423));
                 break;
                 case 98:
                 mat2 _GLF_SWITCH_1_0v;
                 case 11:
                 vec4(-9306.7558, 499.285, 5.5, 9907.2783);
                 default:
                 1;
                }
              }
             break;
             case 16:
             tanh(vec4(-9656.6231, -9.4, -75.19, 13.42));
             default:
             1;
            }
          }
         break;
         case 30:
         mat3x2 _GLF_SWITCH_3_13v, _GLF_SWITCH_3_14v, _GLF_SWITCH_3_15v;
         case 16:
         ivec2(92640, -3745);
         default:
         1;
        }
      }
     while(true);
     case 62:
     uvec4 _GLF_SWITCH_0_41v, _GLF_SWITCH_0_42v[1], _GLF_SWITCH_0_43v[5];
     default:
     1;
    }
  }
 else
  {
   atomicStore(buf[next_virtual_gid], uint(read_1 + 1 == read_2) + 1, 4, 64, 4);
   subgroupAll(true);
  }
}
