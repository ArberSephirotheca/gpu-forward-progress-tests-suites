#version 460

#ifndef REDUCER
#define _GLF_ZERO(X, Y)                   (Y)
#define _GLF_ONE(X, Y)                    (Y)
#define _GLF_FALSE(X, Y)                  (Y)
#define _GLF_TRUE(X, Y)                   (Y)
#define _GLF_IDENTITY(X, Y)               (Y)
#define _GLF_DEAD(X)                      (X)
#define _GLF_FUZZED(X)                    (X)
#define _GLF_WRAPPED_LOOP(X)              X
#define _GLF_WRAPPED_IF_TRUE(X)           X
#define _GLF_WRAPPED_IF_FALSE(X)          X
#define _GLF_SWITCH(X)                    X
#define _GLF_MAKE_IN_BOUNDS_INT(IDX, SZ)  clamp(IDX, 0, SZ - 1)
#define _GLF_MAKE_IN_BOUNDS_UINT(IDX, SZ) clamp(IDX, 0u, SZ - 1u)
#endif


layout(set = 0, binding = 1) uniform buf1 {
 vec2 injectionSwitch;
};
#extension GL_KHR_shader_subgroup_ballot : enable
#extension GL_KHR_shader_subgroup_vote : enable
#extension GL_KHR_shader_subgroup_basic : enable
#extension GL_KHR_memory_scope_semantics : enable
layout(set = 0, binding = 0) buffer Buf {
 uint buf[];
};
layout(local_size_x = 128, local_size_y = 1, local_size_z = 1) in;
void main()
{
 uint subgroup_id = gl_SubgroupID;
uint subgroup_size = 16;
 uint subgroup_local_id = gl_SubgroupInvocationID;
 uint num_workgroup = gl_NumWorkGroups.x;
 uint workgroup_size = gl_WorkGroupSize.x;
 uint workgroup_id = gl_WorkGroupID.x;
 uint workgroup_base = workgroup_size * workgroup_id;
 uint virtual_gid = workgroup_base + subgroup_id * subgroup_size + subgroup_local_id;
 uint next_virtual_gid = workgroup_base + subgroup_id * subgroup_size + ((subgroup_local_id + 1) % subgroup_size);
 atomicStore(buf[next_virtual_gid], uint(1), 4, 64, 4);
 uint read_1 = atomicLoad(buf[virtual_gid], 4, 64, 0);
 uint read_2 = atomicLoad(buf[virtual_gid], 4, 64, 0);
 if(subgroup_local_id + 1 < subgroup_size)
  {
   switch(_GLF_SWITCH(int(_GLF_ZERO(0.0, injectionSwitch.x))))
    {
     case 79:
     if((true ? (uvec4(10315u, 28779u, 108806u, 84298u) != uvec4(10474u, 129339u, 149521u, 135086u)) : true))
      {
       {
        do
         {
          switch(_GLF_SWITCH(int(_GLF_ZERO(0.0, injectionSwitch.x))))
           {
            case 0:
            ((- mat4(2.4, 705.742, -279.830, -6790.5259, 66.75, -4.1, -4.5, -8.0, -9.4, -307.353, -5.9, -0.0, -0.2, -4360.7478, 6410.3234, -6.4)) * mat2x4(-9.5, 565.523, 5.5, 2.7, -719.455, -6174.8778, 5.5, -5.2));
            case 21:
            case 73:
            ivec4(max(-24721, 31864), (55045 - 82397), ivec2(93380, 58789));
            case 37:
            num_workgroup;
            int _GLF_SWITCH_0_0v, _GLF_SWITCH_0_1v, _GLF_SWITCH_0_2v[30];
            case 28:
            (mat3x4(106.616, 7754.7813, 27.17, 4.0, 25.10, 1.2, -53.07, 4881.1190, -8775.5753, 8717.3332, -29.51, 7903.9933) / mat3x4(-2.3, -579.336, 9.0, 744.445, 6243.7693, 19.57, 2.4, -7.9, 3889.4429, -403.105, 6.4, 114.489));
            break;
            case 9:
            bitfieldExtract(uvec4(118889u, 132791u, 18804u, 19298u), bitfieldInsert(_GLF_SWITCH_0_1v, _GLF_SWITCH_0_1v, -2407, (++ _GLF_SWITCH_0_1v)), 76025);
            default:
            1;
           }
         }
        while(true);
       }
       int _GLF_SWITCH_0_3v[46], _GLF_SWITCH_0_4v[26], _GLF_SWITCH_0_5v[7];
       {
        mat4x2(-72.04, -5018.5521, -2.6, 9682.2012, 437.366, 211.093, 7861.0631, 4175.1944);
        for(        min(workgroup_size, packHalf2x16(vec2(-762.202, -6889.0625)));
 false; (mat4x3(mat3x4(-537.234, 16.53, 8.2, 9403.3205, 1.4, -1.3, -0.2, -7044.6977, 3239.6010, -0.2, 8740.2989, 5.2)) * mat4(6790.3488, 0.3, 5.3, -9440.2258, 80.10, 8111.6195, 6.5, -1570.0483, 838.956, -6.9, -73.96, -21.10, 5467.6335, 3.7, 8768.0966, 8.3)))
         {
          switch(_GLF_SWITCH((int(_GLF_ZERO(0.0, injectionSwitch.x)) | 0)))
           {
            case 77:
            1850.9107;
            case 0:
            case 8:
            case 35:
            case 40:
            switch(_GLF_SWITCH(int(_GLF_ZERO(0.0, injectionSwitch.x))))
             {
              case 59:
              vec3(2.7, 8630.4122, 6587.8982);
              case 0:
              case 63:
              case 46:
              case 43:
              case 22:
              bvec2(false, true);
              case 64:
              case 2:
              exp2(vec2(-4635.5767, -54.71));
              case 72:
              bvec2(false, true);
              mat2x3 _GLF_SWITCH_0_6v[54], _GLF_SWITCH_0_7v;
              break;
              case 51:
              ivec2(3108);
              case 60:
              mat3x4 _GLF_SWITCH_4_0v[11];
              default:
              1;
             }
            break;
            case 46:
            vec4 _GLF_SWITCH_6_0v, _GLF_SWITCH_6_1v[24];
            case 67:
            (mat4(5.7, -7.7, 5.1, -7.3, 7.4, -9.4, 22.61, 153.845, 46.74, -6.9, -922.675, -3652.5065, 0.8, 2938.9595, -87.08, 3250.0197) + mat4(2.3, -54.95, 64.30, 57.31, 4.5, 757.334, -95.48, 5.5, -8.5, -3.1, 9.7, -216.565, -2.2, -1.1, -2.9, 8.9));
            default:
            1;
           }
         }
        for(mat3x2 _GLF_SWITCH_0_8v[26], _GLF_SWITCH_0_9v[3]; notEqual(ivec3(-37910, 71371, 78701), ivec3(25699, 80239, -77074)).t; mat2(54.68, -795.108, 13.00, 52.44))
         {
          ;
          ;
          mat3x4 _GLF_SWITCH_0_10v;
          float _GLF_SWITCH_0_11v, _GLF_SWITCH_0_12v, _GLF_SWITCH_0_13v[33];
          ;
          mat2x3(-146.285, 246.614, -7.9, 4.3, -8465.6808, 9630.3556);
          vec3 _GLF_SWITCH_0_14v[48], _GLF_SWITCH_0_15v[77];
          notEqual(ivec4(-62672, 14847, 32434, 21211), ivec4(12113, -70977, -45595, 21430)).yyyz;
          mat4x2 _GLF_SWITCH_0_16v;
         }
        while(true)
         {
          mat4x2(-27.07, 9.8, 9.7, 750.714, -8.5, -479.990, 4.0, -6409.0173);
          uvec2 _GLF_SWITCH_0_17v, _GLF_SWITCH_0_18v;
          int _GLF_SWITCH_0_19v, _GLF_SWITCH_0_20v;
          vec2 _GLF_SWITCH_0_21v;
         }
        for(        uvec2(74662u, 150122u);
 (vec2(9.0, 214.799) == sqrt(injectionSwitch)); (mat3(59.52, 0.3, -3929.2492, -8.3, -1.5, -138.223, 2613.1690, -77.31, -162.011) + -9632.8829))
         {
          ;
          mat3x2 _GLF_SWITCH_0_22v, _GLF_SWITCH_0_23v;
          bvec4 _GLF_SWITCH_0_24v;
          next_virtual_gid;
          ((mat4x2(mat4(4.4, 2.9, -1.9, 140.481, -9209.7899, 4.7, 3605.0818, -980.479, -3.8, 3.5, -192.974, -9771.1107, 8804.0484, 7.9, -3195.8972, 9730.4358)) == mat4x2(8.5, 460.801, 3.0, -6.0, -840.935, 6.8, 8.3, -7164.6555)) ? _GLF_SWITCH_0_22v : (mat3x2(0.5, 58.27, 1.9, 3919.2695, 73.18, -1.0) - 5.0));
          mat4 _GLF_SWITCH_0_25v;
          ;
          ivec2(-65339, 75029);
          injectionSwitch;
         }
        if(true)
         {
          mat4(-94.33, -0.1, -6287.9091, -0.7, 1.6, 55.48, 7.6, -0.3, 2.6, 5.8, -82.68, -5.0, 3.4, -500.721, -401.585, 524.875);
          ;
          uvec3 _GLF_SWITCH_0_26v, _GLF_SWITCH_0_27v;
          ivec2(74446, -67802);
         }
       }
       if(any(bvec4(true, false, false, true)))
        {
         mat4 _GLF_SWITCH_0_28v;
        }
       else
        {
         mat3x2 _GLF_SWITCH_0_29v[99], _GLF_SWITCH_0_30v[99];
         for(         34273;
 (false ^^ true); (int(false) + (ivec3(-26153, -93652, -74874) % ivec3(6282, 73967, 94563))))
          {
           switch(_GLF_SWITCH(int(_GLF_ZERO(0.0, injectionSwitch.x))))
            {
             case 23:
             ivec4(44719, -2675, 75978, -89689);
             case 86:
             mat3x4(-9.1, -9454.6834, 17.93, -61.10, 13.41, 82.97, -2.7, -3752.5109, -53.16, 6.9, -8.2, -3.1);
             case 0:
             case 79:
             case 84:
             case 16:
             case 14:
             case 12:
             case 24:
             case 29:
             case 62:
             switch(_GLF_SWITCH(0))
              {
               case 42:
               (mat2x3(mat4x3(-17.88, -58.47, -97.71, -6220.4550, 9.2, -9091.3435, 2.3, -1641.2576, 2.8, 4.6, 97.34, -1903.7424)) * mat3x2(336.433, 49.72, -866.119, -2786.2086, 5.8, -5306.1700));
               case 0:
               matrixCompMult(mat4x3(-69.85, 55.06, -86.74, 13.25, 1.0, 4.9, -9.1, -7.8, 2.3, 9.7, -15.75, -435.641), (6568.5278 / matrixCompMult(mat4x3(-398.495, -10.48, 7.2, -3209.4354, -65.08, -5.2, 2972.1832, -1.6, -6.9, 2.0, -0.4, -937.931), mat4x3(-0.6, -0.4, -706.547, -5916.7610, -1.6, 261.464, 2.5, -72.03, -1.9, -7.8, -0.4, -6.1))));
               uintBitsToFloat(uvec2(45057u, 21861u));
               ;
               case 82:
               mat2x3(-4.6, 1862.0302, -6.9, -784.715, -8.8, 8723.4893);
               case 21:
               ivec2(49967, -77195);
               break;
               case 18:
               uint _GLF_SWITCH_2_0v[81];
               default:
               1;
              }
             break;
             case 66:
             (mat2x4(-70.79, 5.2, -20.75, -1.5, -85.22, -399.027, 6.3, 53.95) + 0.3);
             case 31:
             mat3x4(-4963.9621, -6866.0352, 4.0, 0.5, -525.567, -93.53, -583.663, 729.529, -133.183, 87.16, -7837.9378, -146.085);
             default:
             1;
            }
          }
         do
          {
           mat2x3(-73.48, -8845.1053, -1.2, 9336.5084, 6.5, 164.739);
           mat2x4 _GLF_SWITCH_0_31v;
           int _GLF_SWITCH_0_32v;
           bvec4 _GLF_SWITCH_0_33v, _GLF_SWITCH_0_34v[98];
           ivec4 _GLF_SWITCH_0_35v, _GLF_SWITCH_0_36v;
           _GLF_SWITCH_0_35v;
           vec2 _GLF_SWITCH_0_37v[27], _GLF_SWITCH_0_38v;
           ;
           mat4x2 _GLF_SWITCH_0_39v, _GLF_SWITCH_0_40v[26], _GLF_SWITCH_0_41v;
          }
         while((mat3(9741.4652, 63.00, 328.364, -919.344, 7.2, -0.9, 541.731, 3224.9960, -6.3) == mat3(-697.757, -6999.2515, 931.484, -18.78, -9280.6187, 0.7, -6.1, 7.3, -5058.6180)));
         if(true)
          {
           mat4(3403.3654, 16.33, 53.98, -6.5, 37.16, 4793.0855, 9.7, -366.559, 180.276, 3.8, 7330.2984, 71.23, -7649.8412, 36.80, -591.232, 2847.4891);
           (mat4x2(-2.4, -1.2, 9005.8133, 80.20, -6084.7841, 731.982, 2508.2920, 7.9) - mat4x2(mat2x3(22.96, -193.541, -5.4, -78.77, -73.94, 1.0)));
           subgroup_size;
           mat4 _GLF_SWITCH_0_42v[49];
           bitfieldInsert(uvec2(14678u, 71461u), uvec2(129425u, 109114u), -38291, 80757);
           ivec2 _GLF_SWITCH_0_43v, _GLF_SWITCH_0_44v;
          }
         if((virtual_gid < subgroup_size))
          {
           vec4 _GLF_SWITCH_0_45v;
           uvec2 _GLF_SWITCH_0_46v, _GLF_SWITCH_0_47v, _GLF_SWITCH_0_48v[36];
           ;
          }
         if(((+ read_1) < read_2))
          {
           (-3.6 / mat4x2(-9.7, 667.735, 51.66, -79.84, -7570.7335, 8.5, -33.69, 3353.4052))[3];
           tanh(vec3(-61.10, -9.3, 3.9)[0]);
           uint _GLF_SWITCH_0_49v, _GLF_SWITCH_0_50v;
           mat2x3 _GLF_SWITCH_0_51v, _GLF_SWITCH_0_52v[46], _GLF_SWITCH_0_53v;
           mat3x4(1.9, 11.22, 4762.3950, 18.86, -55.23, 3497.8870, 3219.2559, 572.513, 9393.5200, -6.9, 7816.8992, 7.4);
           (mat3x4(7063.6030, -2112.8457, -40.96, -2772.8198, -5039.6462, 86.37, 6329.7040, -4.5, -353.504, -7.7, -6.2, -89.49) + (false ? 127.702 : -0.1));
           bvec2(true, false);
          }
         else
          {
           mat4(mat3x4(-5.7, -0.9, -4.4, -9.7, 308.591, -226.789, -3749.5968, 5.0, -20.57, 980.747, 1.5, 7388.1982));
           mat3 _GLF_SWITCH_0_54v, _GLF_SWITCH_0_55v;
           sqrt(549.601);
           mat4x3 _GLF_SWITCH_0_56v[66], _GLF_SWITCH_0_57v, _GLF_SWITCH_0_58v[66];
           mat2x4(-60.78, 1.3, -443.221, -7.5, 3477.2595, 77.15, -8616.7129, 2.1);
           injectionSwitch;
          }
         (-55.44 - mat4x2(-81.09, 96.92, -95.00, -21.24, 744.855, 824.427, 76.25, 133.765));
         while(true)
          {
           next_virtual_gid;
          }
        }
      }
     else
      {
       switch(_GLF_SWITCH(0))
        {
         case 59:
         if((virtual_gid != atomicAdd(virtual_gid, uaddCarry(workgroup_id, read_2, subgroup_local_id))))
          {
           uvec4(27545u, 140037u, 94045u, 78413u);
           bool _GLF_SWITCH_5_0v, _GLF_SWITCH_5_1v[22];
           ;
           transpose(mat2(6021.7218, -5.2, -68.56, -1976.7894));
          }
         else
          {
           uvec3(10034u, 99841u, 31670u);
           uvec3 _GLF_SWITCH_5_2v, _GLF_SWITCH_5_3v, _GLF_SWITCH_5_4v;
           workgroup_size;
           (_GLF_SWITCH_5_4v >> next_virtual_gid);
           ;
          }
         case 52:
         {
          int _GLF_SWITCH_5_5v, _GLF_SWITCH_5_6v, _GLF_SWITCH_5_7v;
          mat3x4 _GLF_SWITCH_5_8v, _GLF_SWITCH_5_9v;
          float(uvec2(92983u, 144876u)[1]);
         }
         case 0:
         case 54:
         case 24:
         case 81:
         case 45:
         case 19:
         case 15:
         case 98:
         case 26:
         case 13:
         while(false)
          {
           (mat3x4(3.6, 21.98, 9.0, 1100.2337, 5.0, -8.0, 2.5, 765.050, -9.8, -6.3, 5.1, -0.3));
           while(false)
            {
             switch(_GLF_SWITCH(0))
              {
               case 0:
               case 13:
               switch(_GLF_SWITCH(0))
                {
                 case 11:
                 ;
                 case 69:
                 bool _GLF_SWITCH_2_0v, _GLF_SWITCH_2_1v, _GLF_SWITCH_2_2v;
                 case 0:
                 case 67:
                 case 58:
                 case 19:
                 case 1:
                 case 10:
                 case 54:
                 switch(_GLF_SWITCH(0))
                  {
                   case 0:
                   case 69:
                   case 35:
                   case 25:
                   case 45:
                   case 46:
                   case 71:
                   (mat3x2(-50.42, 9.4, -81.05, 169.361, -6.3, -855.917) - 0.2);
                   break;
                   case 9:
                   exp2(vec2(93.88, 94.85));
                   case 3:
                   bvec3 _GLF_SWITCH_1_0v, _GLF_SWITCH_1_1v;
                   default:
                   1;
                  }
                 break;
                 default:
                 1;
                }
               break;
               case 74:
               mat2 _GLF_SWITCH_3_0v[49], _GLF_SWITCH_3_1v, _GLF_SWITCH_3_2v[93];
               default:
               1;
              }
            }
           ;
           next_virtual_gid;
           ;
           uint _GLF_SWITCH_0_59v[34], _GLF_SWITCH_0_60v, _GLF_SWITCH_0_61v;
          }
         break;
         case 37:
         for(uint _GLF_SWITCH_5_10v[40], _GLF_SWITCH_5_11v, _GLF_SWITCH_5_12v; true; ((- mat3x2(-5.7, 7.3, 6045.5540, 7.8, -183.132, 32.98))))
          {
           cosh(-7.9);
           mat3 _GLF_SWITCH_5_13v, _GLF_SWITCH_5_14v;
          }
         default:
         1;
        }
      }
     case 0:
     case 21:
     case 77:
     case 3:
     case 37:
     case 19:
     atomicStore(buf[next_virtual_gid], uint(read_1 == read_2) + 1, 4, 64, 4);
     case 24:
     case 70:
     case 4:
     case 73:
     subgroupAll(false);
     break;
     default:
     1;
    }
  }
 else
  {
   atomicStore(buf[next_virtual_gid], uint(read_1 == read_2) + 1, 4, 64, 4);
   subgroupAll(true);
  }
}
