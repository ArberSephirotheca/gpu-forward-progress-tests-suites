#version 460

#ifndef REDUCER
#define _GLF_ZERO(X, Y)                   (Y)
#define _GLF_ONE(X, Y)                    (Y)
#define _GLF_FALSE(X, Y)                  (Y)
#define _GLF_TRUE(X, Y)                   (Y)
#define _GLF_IDENTITY(X, Y)               (Y)
#define _GLF_DEAD(X)                      (X)
#define _GLF_FUZZED(X)                    (X)
#define _GLF_WRAPPED_LOOP(X)              X
#define _GLF_WRAPPED_IF_TRUE(X)           X
#define _GLF_WRAPPED_IF_FALSE(X)          X
#define _GLF_SWITCH(X)                    X
#define _GLF_MAKE_IN_BOUNDS_INT(IDX, SZ)  clamp(IDX, 0, SZ - 1)
#define _GLF_MAKE_IN_BOUNDS_UINT(IDX, SZ) clamp(IDX, 0u, SZ - 1u)
#endif


layout(set = 0, binding = 1) uniform buf1 {
 vec2 injectionSwitch;
};
#extension GL_KHR_shader_subgroup_ballot : enable
#extension GL_KHR_shader_subgroup_vote : enable
#extension GL_KHR_shader_subgroup_basic : enable
#extension GL_KHR_memory_scope_semantics : enable
layout(set = 0, binding = 0) buffer Buf {
 uint buf[];
};
layout(set = 0, binding = 2) buffer Checker {
 uint checker[];
};
layout(local_size_x = 128, local_size_y = 1, local_size_z = 1) in;
void main()
{
 uint subgroup_id = gl_SubgroupID;
uint subgroup_size = 16;
 uint subgroup_local_id = gl_SubgroupInvocationID;
 uint num_workgroup = gl_NumWorkGroups.x;
 uint workgroup_size = gl_WorkGroupSize.x;
 uint workgroup_id = gl_WorkGroupID.x;
 uint workgroup_base = workgroup_size * workgroup_id;
 uint virtual_gid = workgroup_base + subgroup_id * subgroup_size + subgroup_local_id;
 uint next_virtual_gid = workgroup_base + subgroup_id * subgroup_size + ((subgroup_local_id + 1) % subgroup_size);
 atomicStore(buf[next_virtual_gid], uint(1), 4, 64, 4);
 uint read = atomicLoad(buf[virtual_gid], 4, 64, 0);
 if(subgroup_local_id + 1 < subgroup_size)
  {
   for(int _injected_loop_counter = (64344 & 0); _GLF_WRAPPED_LOOP(_injected_loop_counter != 1); _injected_loop_counter ++)
    {
     switch(_GLF_SWITCH(0))
      {
       case 0:
       case 88:
       case 98:
       case 20:
       case 52:
       case 82:
       atomicStore(checker[virtual_gid], read, 4, 64, 4);
       case 2:
       if(_GLF_WRAPPED_IF_FALSE(false))
        {
        }
       else
        {
         subgroupAll(false);
        }
       break;
       case 62:
       for(int _GLF_SWITCH_0_0v, _GLF_SWITCH_0_1v[45]; (ivec3(-66087, -14611, 41045) != ivec3(25625, -3789, -63482)); bvec4(bvec2(true, true), (! true), (mat3x2(6523.5113, 77.22, -37.89, -4.8, 86.71, -219.623) == mat3x2(764.090, -5.0, -0.8, 43.27, 3.8, -9050.1359))))
        {
         switch(_GLF_SWITCH(0))
          {
           case 87:
           (-6.2 / mat2x3(mat4x2(-8.9, -7.9, -6.3, 5.4, 3.9, 6.0, -2917.9129, 1148.1780)));
           case 0:
           case 61:
           case 49:
           case 60:
           switch(_GLF_SWITCH((0 << _GLF_IDENTITY(int(8), int(8)))))
            {
             case 33:
             uvec4 _GLF_SWITCH_2_0v, _GLF_SWITCH_2_1v;
             case 31:
             bvec2(true, true);
             case 0:
             case 71:
             if(false)
              {
               if(_GLF_WRAPPED_IF_FALSE(_GLF_FALSE(false, (injectionSwitch.x > injectionSwitch.y))))
                {
                }
               else
                {
                 switch(_GLF_SWITCH(0))
                  {
                   case 0:
                   mat2x3(-6.3, -1106.6015, -522.943, -37.89, -40.39, -668.838);
                   case 48:
                   case 77:
                   mat2(952.811, -6.7, 635.486, 40.40);
                   ;
                   bvec4(true, false, false, false);
                   ivec4 _GLF_SWITCH_0_2v, _GLF_SWITCH_0_3v, _GLF_SWITCH_0_4v;
                   break;
                   case 72:
                   ;
                   case 5:
                   76.35;
                   default:
                   1;
                  }
                }
               for(               mat4x3(9.1, -367.651, 908.377, -12.75, 8376.1265, -0.4, 576.544, 4.6, -0.0, 73.30, 6.5, 271.402);
 true; (uvec4(66365u, 55731u, 182769u, 154261u) - uvec4(52854u, 97709u, 190897u, 140517u)))
                {
                 switch(_GLF_SWITCH(int(_GLF_ZERO(0.0, injectionSwitch.x))))
                  {
                   case 0:
                   case 35:
                   if(_GLF_WRAPPED_IF_TRUE(_GLF_TRUE(true, (injectionSwitch.x < injectionSwitch.y))))
                    {
                     if(_GLF_WRAPPED_IF_FALSE(false))
                      {
                      }
                     else
                      {
                       mat3x2(mat2x4(6.6, 1.6, -4.7, -6984.9864, 0.4, -80.20, 1089.5664, -55.34));
                      }
                    }
                   else
                    {
                    }
                   case 33:
                   case 53:
                   (- ivec3(687, -28260, 72825));
                   case 10:
                   matrixCompMult(mat4x2(-591.524, 7950.3709, -0.8, -5315.4632, -4.0, -31.28, 5.9, 3.1), mat4x2(mat2x3(-473.836, 59.96, 952.220, 2.1, -5.8, 86.67)));
                   break;
                   case 41:
                   (vec4(-2.9, 96.51, -89.80, -3.9) + vec4(1.8, -51.93, -8.4, 5.9));
                   default:
                   1;
                  }
                }
               if(false)
                {
                }
               ivec4(-55128, -57987, -30746, -16296);
               fract(fma(vec3(373.979, -204.473, 29.24), vec3(3424.4293, 1.2, -2.2), vec3(5865.4153, 4.2, 86.22)));
               if(_GLF_WRAPPED_IF_FALSE(_GLF_FALSE(false, (injectionSwitch.x > injectionSwitch.y))))
                {
                }
               else
                {
                 for(vec2 _GLF_SWITCH_0_5v, _GLF_SWITCH_0_6v; false; (ivec3(33500, 5140, 70429) ^ (false ? clamp(ivec3(8740, 93876, -68825), 65459, _GLF_SWITCH_0_0v) : ivec3(66746, -93867, -39674))))
                  {
                  }
                }
               while((true && false))
                {
                 switch(_GLF_SWITCH(int(_GLF_ZERO(0.0, injectionSwitch.x))))
                  {
                   case 54:
                   mat3x4 _GLF_SWITCH_4_0v[5], _GLF_SWITCH_4_1v, _GLF_SWITCH_4_2v;
                   case 0:
                   (mat3x4(0.3, -6318.9788, -2.4, -8708.1429, -0.7, 1.3, 771.635, -9438.5116, -29.03, 6.3, 14.70, -48.77) , mat2(6676.1197, 5.0, 0.9, 3.7));
                   mat3x2 _GLF_SWITCH_0_7v, _GLF_SWITCH_0_8v[52], _GLF_SWITCH_0_9v;
                   mat2x4(-2.8, 7750.7667, -10.77, -287.784, -828.902, -4199.9446, -2.7, -37.95);
                   break;
                   default:
                   1;
                  }
                }
               for(vec4 _GLF_SWITCH_0_10v, _GLF_SWITCH_0_11v; true; mat2x3(-6.0, 1.3, -37.67, 8833.9367, -2.3, 6186.6471))
                {
                }
              }
             for(             mat2x3(mat3x2(-1.5, -5.9, 17.02, 9411.5603, -919.343, -1635.8230));
 false; true)
              {
               switch(_GLF_SWITCH(0))
                {
                 case 0:
                 case 89:
                 case 93:
                 case 85:
                 switch(_GLF_SWITCH(0))
                  {
                   case 41:
                   ivec2 _GLF_SWITCH_1_0v, _GLF_SWITCH_1_1v[57];
                   case 72:
                   bool _GLF_SWITCH_1_2v[27], _GLF_SWITCH_1_3v, _GLF_SWITCH_1_4v[44];
                   case 0:
                   do
                    {
                     if((bvec4(true, false, false, true) != bvec4(false, true, false, false)))
                      {
                       switch(_GLF_SWITCH(0))
                        {
                         case 36:
                         mat4 _GLF_SWITCH_2_0v[71];
                         case 0:
                         bvec4 _GLF_SWITCH_0_12v, _GLF_SWITCH_0_13v;
                         do
                          {
                           ;
                          }
                         while(_GLF_WRAPPED_LOOP(_GLF_FALSE(false, (injectionSwitch.x > injectionSwitch.y))));
                         uvec2 _GLF_SWITCH_0_14v, _GLF_SWITCH_0_15v, _GLF_SWITCH_0_16v;
                         (+ -94.90);
                         ivec2(23214, 72765);
                         if(_GLF_WRAPPED_IF_TRUE(_GLF_TRUE(true, (injectionSwitch.x < injectionSwitch.y))))
                          {
                           switch(_GLF_SWITCH((0 >> _GLF_IDENTITY(int(4), int(4)))))
                            {
                             case 0:
                             case 88:
                             case 8:
                             case 95:
                             case 12:
                             case 87:
                             case 39:
                             -56196;
                             break;
                             case 15:
                             (vec3(0.1, -61.13, -25.95) * mat4x3(367.275, 997.623, -72.41, -2.8, -69.67, 9.6, -2539.4450, -2910.5252, 39.70, -9.4, -8918.9286, 69.83));
                             case 29:
                             lessThanEqual(ivec3(-61406, -95219, -27293), ivec3(-65326, -69616, -55775));
                             default:
                             1;
                            }
                          }
                         else
                          {
                          }
                         break;
                         default:
                         1;
                        }
                      }
                    }
                   while(_GLF_WRAPPED_LOOP(false));
                   int _GLF_SWITCH_0_17v[32];
                   uvec2 _GLF_SWITCH_0_18v, _GLF_SWITCH_0_19v[73];
                   greaterThan(uvec2(168291u, 137210u), _GLF_SWITCH_0_18v);
                   break;
                   case 99:
                   uvec3(41097u, 81909u, 36240u);
                   case 31:
                   ivec4(38494, 7027, 71175, -40312);
                   default:
                   1;
                  }
                 break;
                 case 43:
                 ivec2 _GLF_SWITCH_3_0v, _GLF_SWITCH_3_1v;
                 case 54:
                 uvec4 _GLF_SWITCH_3_2v, _GLF_SWITCH_3_3v;
                 default:
                 1;
                }
              }
             case 10:
             bvec4(true, true, true, true);
             case 87:
             case 21:
             if(false)
              {
               for(int _injected_loop_counter = 1; _GLF_WRAPPED_LOOP(_injected_loop_counter != 0); _injected_loop_counter --)
                {
                 switch(_GLF_SWITCH(0))
                  {
                   case 0:
                   case 36:
                   case 61:
                   case 70:
                   case 99:
                   workgroup_size;
                   case 14:
                   mat3x2 _GLF_SWITCH_0_20v[38], _GLF_SWITCH_0_21v, _GLF_SWITCH_0_22v;
                   break;
                   default:
                   1;
                  }
                }
              }
             else
              {
              }
             bvec2(true, false);
             case 82:
             vec3(9.4, 564.641, -14.19);
             break;
             case 94:
             ivec4(84940, -30701, -32199, -5075);
             case 42:
             bool _GLF_SWITCH_2_2v, _GLF_SWITCH_2_3v[28], _GLF_SWITCH_2_4v;
             default:
             1;
            }
           break;
           case 21:
           uvec4(91581u, 43278u, 100037u, 151354u);
           default:
           1;
          }
        }
       default:
       do
        {
         1;
        }
       while(_GLF_WRAPPED_LOOP(false));
      }
    }
  }
 else
  {
   atomicStore(checker[virtual_gid], read, 4, 64, 4);
   subgroupAll(true);
  }
}
